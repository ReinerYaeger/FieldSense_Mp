{% extends 'layouts/base.html' %}
{% load static %}

{% block extrastyle %}
    <!-- morris css -->
    <link rel="stylesheet" href="{% static 'assets/plugins/chart-morris/css/morris.css' %}">
    {#    <script src="{% static 'assets/plugins/chartjs/chart-js.js' %}"></script>#}


    <style>
        #map {
            height: 180px;
        }

        .parent-fit {
            flex-grow: 1;
            border: none;
            margin: 0;
            padding: 0;

        }

    </style>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" crossorigin=""/>
{% endblock extrastyle %}


{% block content %}

    <script>
        var marker;
        var map;
    </script>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            // Initialize Leaflet map
            map = L.map('map').setView([18.109656, -77.297565], 7);
            var spatialExtent = L.latLngBounds([17.7012, -78.3666], [18.5242, -76.199]);

            map.setMaxBounds(spatialExtent);
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 22,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);
            map.on('click', function (e) {
                map.off('click', e);
                lat = e.latlng.lat;
                long = e.latlng.lng;

                if (marker) { // check
                    map.removeLayer(marker); // remove
                }
                marker = L.marker([lat, long]).addTo(map);
                document.getElementById("lat-value").value = lat;
                document.getElementById("long-value").value = long;

            });
            pointToLocation()

        });

    </script>

    <script>

        function changeForm() {
            if (document.getElementById('sensor_group_radio').checked) {

                document.getElementById('sensor_group_form').hidden = false;
                document.getElementById('island_wide_form').hidden = true;

            } else if (document.getElementById('island_wide_radio').checked) {
                document.getElementById('sensor_group_form').hidden = true;
                document.getElementById('island_wide_form').hidden = false;


            }
        }
    </script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <div class="auth-wrapper">
        <div class="auth-content">
            <div class="auth-bg">
                <span class="r"></span>
                <span class="r s"></span>
                <span class="r s"></span>
                <span class="r"></span>
            </div>
            <div class="card" style="width: 30rem;">
                <form method="post" class="card-body text-center">
                    {% csrf_token %}

                    <div class="mb-4">
                        <i class="feather icon-file-text auth-icon"></i>
                    </div>
                    <h3 class="mb-6">Generate Report</h3>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="radio"
                                       checked id="island_wide_radio" onchange="changeForm()">
                                <label class="form-check-label" for="radio">
                                    Island Wide
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="radio"
                                       id="sensor_group_radio" onchange="changeForm()"
                                >
                                <label class=" form-check-label" for="radio">
                                    Sensor Group
                                </label>
                            </div>
                        </div>
                    </div>
                    <div id="island_wide_form">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="s-date" class="form-label">Start Date</label>
                                <input onchange="" step=".0000001" type="date" class="form-control"
                                       value="18.109656" id="lat-value">
                            </div>

                            <div class="col-md-6">
                                <label for="e-date" class="form-label">End Date</label>
                                <input onchange="" step=".0000001" type="date" class="form-control"
                                       value="-77.297565" id="long-value">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">
                                <b><h5>Select Variables</h5></b>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                                    <label class="form-check-label" for="flexCheckDefault">Soil Moisture 10cm</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                                    <label class="form-check-label" for="flexCheckDefault">Soil Temperature 0cm</label>
                                </div>

                                <!-- Checked checkbox -->
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Temperature 80m</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Evapotranspiration</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Wind Speed 10m</label>
                                </div>
                            </div>
                            <div class="col">
                                <b><h5>Statistical Methods</h5></b>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                                    <label class="form-check-label" for="flexCheckDefault">Time Series Analysis</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                                    <label class="form-check-label" for="flexCheckDefault">Time Series Forecasting</label>
                                </div>

                                <!-- Checked checkbox -->
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Temperature 80m</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Evapotranspiration</label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked"
                                           checked/>
                                    <label class="form-check-label" for="flexCheckChecked">Wind Speed 10m</label>
                                </div>
                            </div>
                        </div>
                        <br>


                        <button type="submit" data-toggle="modal" data-target="#exampleModal" class="btn btn-primary">
                            Submit
                        </button>


                    </div>

                    {#            sensor group form start here#}
                    <div hidden id="sensor_group_form">

                        <div class="mb-3">
                            <label for="sensor_group_select" class="form-label">Sensor Group</label>
                            <select required class="form-control" id="sensor_group_select"
                                    name="sensor_group_select">

                                {% for sensor_group in sensor_group_names %}
                                    <option value="{{ sensor_group }}"
                                            data-x="{{ sensor_group.sensor_group_location.y }}"
                                            data-y="{{ sensor_group.sensor_group_location.x }}">
                                        {{ sensor_group.sensor_group_name }}
                                    </option>

                                {% endfor %}
                            </select>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="s-date" class="form-label">Start Date</label>
                                <input onchange="" step=".0000001" type="datetime" class="form-control"
                                        id="lat-value">
                            </div>

                            <div class="col-md-6">
                                <label for="e-date" class="form-label">End Date</label>
                                <input onchange="" step=".0000001" type="datetime" class="form-control"
                                       id="long-value">
                            </div>
                        </div>
                        <b><h5>Select Variables</h5></b>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                            <label class="form-check-label" for="flexCheckDefault">Soil Moisture 10cm</label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"/>
                            <label class="form-check-label" for="flexCheckDefault">Soil Temperature 0cm</label>
                        </div>

                        <!-- Checked checkbox -->
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked/>
                            <label class="form-check-label" for="flexCheckChecked">Temperature 80m</label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked/>
                            <label class="form-check-label" for="flexCheckChecked">Evapotranspiration</label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked/>
                            <label class="form-check-label" for="flexCheckChecked">Wind Speed 10m</label>
                        </div>
                        <br>


                        <button type="submit" data-toggle="modal" data-target="#exampleModal" class="btn btn-primary">
                            Submit
                        </button>
                </form>
            </div>
            {#            sensor group form ends here#}

        </div>
    </div>
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>



{% endblock content %}